import React from "react";
import db from "../CONFIG"; //Database import
import firebase from "firebase"; //Timestamp from firebase : like this "firebase.firestore.FieldValue.serverTimestamp()"
import { notificationCount } from "../features/user/userSlice";
import { useDispatch } from "react-redux";

function ItemInventory({ name, image, rarity, type, id, key }) {
  //Can't perform a React state update on an unmounted component.
  //This is a no-op, but it indicates a memory leak in your application.
  //To fix, cancel all subscriptions and asynchronous tasks in a useEffect cleanup function.
  //I got this fucking stupid error on console....kaam chai vairaxa tara yo muji le dimaag kharab banayo...
  const dispatch = useDispatch();

  const handleWithdraw = () => {
    db.collection("inventory").doc(id).delete();

    dispatch(notificationCount());
    db.collection("notification").add({
      message: `Trade offer to your steam account with item named ${name} has been made. Check your steam account.`,
      time: firebase.firestore.FieldValue.serverTimestamp(),
      image:
        "data:image/png;base64,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",
    });
  };

  return (
    <div className="webInventory__item">
      <div className="webInventory__itemTop">
        <img src={image} alt="" />
        <div className="webInventory__name">{name}</div>
        <div className="webInventory__rarity">
          {rarity} {type}
        </div>
      </div>
      <button className="webInventory__send" onClick={handleWithdraw}>
        Withdraw
      </button>
    </div>
  );
}

export default ItemInventory;
